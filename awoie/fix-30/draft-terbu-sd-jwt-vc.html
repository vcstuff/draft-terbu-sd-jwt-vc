<!DOCTYPE html>
<html lang="en" class="Internet-Draft">
<head>
<meta charset="utf-8">
<meta content="Common,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>Verifiable Credentials based on SD-JWT with JSON payloads</title>
<meta content="Oliver Terbu" name="author">
<meta content="Daniel Fett" name="author">
<meta content="
       This specification describes data formats, validation and processing rules to
express Verifiable Credentials based on the securing mechanisms of SD-JWT
(TBD: see oauth-selective-disclosure-jwt) and JSON payloads. 
    " name="description">
<meta content="xml2rfc 3.17.1" name="generator">
<meta content="security" name="keyword">
<meta content="openid" name="keyword">
<meta content="sd-jwt" name="keyword">
<meta content="draft-terbu-sd-jwt-vc-latest" name="ietf.draft">
<!-- Generator version information:
  xml2rfc 3.17.1
    Python 3.10.11
    appdirs 1.4.4
    ConfigArgParse 1.5.3
    google-i18n-address 2.5.2
    intervaltree 3.1.0
    Jinja2 3.1.2
    lxml 4.9.2
    pycountry 22.3.5
    PyYAML 6.0
    requests 2.28.1
    setuptools 65.6.0
    six 1.16.0
    wcwidth 0.2.6
-->
<link href="draft-terbu-sd-jwt-vc.xml" rel="alternate" type="application/rfc+xml">
<link href="#copyright" rel="license">
<style type="text/css">@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}

@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-cyrillic.woff2') format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-cyrillic.woff2') format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: local('Lora SemiBold'), local('Lora-SemiBold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-semibold-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'Cabin Condensed';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: local('Cabin Condensed SemiBold'), local('CabinCondensed-SemiBold'), url('https://martinthomson.github.io/rfc-css/fonts/cabincondensed-semibold-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Cabin Condensed';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: local('Cabin Condensed SemiBold'), local('CabinCondensed-SemiBold'), url('https://martinthomson.github.io/rfc-css/fonts/cabincondensed-semibold-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Cabin Condensed';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: local('Cabin Condensed SemiBold'), local('CabinCondensed-SemiBold'), url('https://martinthomson.github.io/rfc-css/fonts/cabincondensed-semibold-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'Oxygen Mono';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Oxygen Mono'), local('OxygenMono-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/oxygenmono-regular-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Oxygen Mono';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Oxygen Mono'), local('OxygenMono-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/oxygenmono-regular-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

:root {
  color-scheme: light dark;
  --background-color: #fff;
  --text-color: #222;
  --title-color: #191919;
  --link-color: #2a6496;
  --highlight-color: #f9f9f9;
  --line-color: #eee;
  --pilcrow-weak: #ddd;
  --pilcrow-strong: #bbb;
  --small-font-size: 14.5px;
  --font-mono: 'Oxygen Mono', monospace;
  scrollbar-color: #bbb #eee;
}
body {
  max-width: 600px;
  margin: 75px auto;
  padding: 0 5px;
  color: var(--text-color);
  background-color: var(--background-color);
  font: 16px/22px "Lora", serif;
  scroll-behavior: smooth;
}

.ears {
  display: none;
}

/* headings */
h1, h2, h3, h4, h5, h6 {
  font-family: "Cabin Condensed", sans-serif;
  font-weight: 600;
  margin: 0.8em 0 0.3em;
  font-size-adjust: 0.5;
  color: var(--title-color);
}
h1#title {
  font-size: 32px;
  line-height: 40px;
  clear: both;
}
h1#title, h1#rfcnum {
  margin: 1.5em 0 0.2em;
}
h1#rfcnum + h1#title {
  margin: 0.2em 0;
}

h1, h2, h3 {
  font-size: 22px;
  line-height: 27px;
}
h4, h5, h6 {
  font-size: 20px;
  line-height: 24px;
}

/* general structure */
.author {
  padding-bottom: 0.3em;
}
#abstract+p {
  font-size: 18px;
  line-height: 24px;
}
#abstract+p code, #abstract+p samp, #abstract+p tt {
  font-size: 16px;
  line-height: 0;
}

p {
  padding: 0;
  margin: 0.5em 0;
  text-align: left;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: var(--highlight-color);
  border: 1px solid var(--line-color);
  border-radius: 3px;
  padding: 0.5em 1em 0;
  margin-bottom: 0.5em;
}
.alignRight.art-text pre {
  padding: 0;
  width: auto;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
/* font-family isn't space-separated, but =~ will have to do */
svg[font-family~="monospace" i], svg [font-family~="monospace" i] {
  font-family: var(--font-mono);
}
.alignCenter.art-text {
  background-color: var(--highlight-color);
  border: 1px solid var(--line-color);
  border-radius: 3px;
  padding: 0.5em 1em 0;
  margin-bottom: 0.5em;
}
.alignCenter.art-text pre {
  padding: 0;
  width: auto;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  border: none;
  /* this isn't optimal, but it's an existence proof.  PrinceXML doesn't
     support flexbox yet.
  */
  display: table;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 0.5em 2em;
}
:is(ol, ul) :is(ol, ul) {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
:is(ul, ol).compact, .ulCompact, .olCompact {
  line-height: 1;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
  clear: left;
  --indent: 3ch;
  /* --indent: attr(indent ch); not supported in any browser, but we can dream */
}
dl.olPercent {
  --indent: 5ch;
}
dl > dt {
  float: left;
  margin-right: 2ch;
  min-width: 8ch;
}
dl.dlNewline > dt {
  float: none;
}
dl > dd {
  margin-bottom: .8em;
  margin-left: var(--indent) !important; /* stupid element overrides */
  min-height: 2ex;
}
dl.olPercent > dt {
  min-width: calc(var(--indent) - 2ch);
}
:is(dl.compact, .dlCompact) > dd {
  margin-bottom: 0;
}
:is(dl.compact, .dlCompact) > dd > :is(:first-child, .break:first-child + *) {
  margin-top: 0;
}
:is(dl.compact, .dlCompact) > dd > :is(:last-child) {
  margin-bottom: 0;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0;
}
:is(dd, span).break {
  display: none;
}

/* links */
a, a[href].selfRef:hover {
  text-decoration: none;
}
a[href] {
  color: var(--link-color);
}
a[href].selfRef, .iref + a[href].internal {
  color: var(--text-color);
}
a[href]:hover {
  text-decoration: underline;
}
a[href].selfRef:hover {
  background-color: var(--highlight-color);
}
a.xref:is(.cite, .auto), :is(#status-of-memo, #copyright) a {
  white-space: nowrap;
}

/* Figures */
tt, code, pre {
  background-color: var(--highlight-color);
  font: 14px/22px var(--font-mono);
}
tt, code {
  /* changing the font for inline elements leads to different ascender
     and descender heights; as we want to retain baseline alignment,
     remove leading to avoid altering the final height of lines
     note: this fails if these blocks take an entire line,
     a different solution would be great */
  line-height: 0;
}
:is(h1, h2, h3, h4, h5, h6) :is(tt, code) {
  font-size: 84%;
}
pre {
  border: 1px solid var(--line-color);
  font-size: 13.5px;
  line-height: 16px;
  letter-spacing: -0.2px;
  margin: 5px;
  padding: 5px;
}
img {
  max-width: 100%;
}
figure {
  margin: 0.5em 0;
  padding: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption, caption {
  font-style: italic;
  margin: 0.5em 1.5em;
  text-align: left;
}
@media screen {
  /* Auto-collapse boilerplate. */
  :is(#status-of-memo, #copyright) p {
    margin: -2px 0;
    max-height: 0;
    transition: max-height 2s ease, margin 0.5s ease 0.5s;
    overflow: hidden;
  }
  :is(#status-of-memo, #copyright):hover p,
  :is(#status-of-memo, #copyright) h2:target ~ p {
    margin: 0.5em 0;
    max-height: 500px;
    overflow: auto;
  }
  pre, svg {
    display: inline-block;
    overflow-x: auto;
  }
  pre {
    max-width: 100%;
    width: calc(100% - 22px - 1em);
  }
  svg {
    max-width: calc(100% - 22px - 1em);
  }
  figure pre {
    display: block;
    width: calc(100% - 25px);
  }
  :is(pre, svg) + .pilcrow {
    display: inline-block;
    vertical-align: text-bottom;
    padding-bottom: 8px;
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 0 2em;
  font-style: italic;
}
blockquote {
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  max-width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
}
table.right {
  margin-left: auto;
}
table.center {
  margin-left: auto;
  margin-right: auto;
}
table.left {
  margin-right: auto;
}
thead, tbody {
  border: 1px solid var(--line-color);
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 5px 10px;
}
th {
  background-color: var(--line-color);
}
:is(tr:nth-child(2n), thead+tbody > tr:nth-child(2n+1)) > td {
  background-color: var(--background-color);
}
:is(tr:nth-child(2n+1), thead+tbody > tr:nth-child(2n)) > td {
  background-color: var(--highlight-color);
}
table caption {
  margin: 0;
  padding: 3px 0 3px 1em;
}
table p {
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  margin-left: 3px;
  opacity: 0.2;
  user-select: none;
}
a.pilcrow[href] { color: var(--pilcrow-weak); }
a.pilcrow[href]:hover { text-decoration: none; }
@media not print {
  :hover > a.pilcrow {
    opacity: 1;
  }
  a.pilcrow[href]:hover {
    color: var(--pilcrow-strong);
    background-color: transparent;
  }
}
@media print {
  a.pilcrow {
    display: none;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid var(--line-color);
}
.bcp14 {
  font-variant: small-caps;
  font-weight: 600;
  font-size: var(--small-font-size);
}
.role {
  font-variant: all-small-caps;
}
sub, sup {
  line-height: 1;
  font-size: 80%;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: var(--small-font-size);
  line-height: 18px;
  --identifier-width: 15ch;
}
#identifiers dt {
  width: var(--identifier-width);
  min-width: var(--identifier-width);
  clear: left;
  float: left;
  text-align: right;
}
#identifiers dd {
  margin: 0;
  margin-left: calc(1em + var(--identifier-width)) !important;
  min-width: 5em;
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #999;
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
#toc nav ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
#toc nav li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
#toc a.xref {
  white-space: normal;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 10ch;
  margin-right: 1.5ch;
}
.references dt:target::before {
  content: "⇒";
  width: 15px;
  margin: 0 10px 0 -25px;
}
.references dd {
  margin-left: 12ch !important;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
#rfc\.index\.index + ul {
  margin-left: 0;
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}
address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}
@media (min-width: 500px) {
  #authors-addresses > section {
    column-count: 2;
    column-gap: 20px;
  }
  #authors-addresses > section > h2 {
    column-span: all;
  }
  /* hack for break-inside: avoid-column */
  #authors-addresses address {
    display: inline-block;
    break-inside: avoid-column;
  }
}

.rfcEditorRemove p:first-of-type {
  font-style: italic;
}
.cref {
  background-color: rgba(249, 232, 105, 0.3);
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 929px) {
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    border-bottom: 1px solid #ccc;
    opacity: 0.6;
  }
  #toc.active {
      opacity: 1;
  }
  #toc h2 {
    margin: 0;
    padding: 2px 0 2px 6px;
    padding-right: 1em;
    font-size: 18px;
    line-height: 24px;
    min-width: 190px;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 8px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    background-color: var(--background-color);
    padding: 0.5em 1em 1em;
    overflow: auto;
    overscroll-behavior: contain;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
  #toc.active nav {
    display: block;
  }
  /* Make the collapsed ToC header render white on gray also when it's a link */
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
  #toc a.toplink {
    margin-top: 2px;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 930px) {
  body {
    padding-right: 360px;
    padding-right: calc(min(180px + 20%, 500px));
  }
  #toc {
    position: fixed;
    bottom: 0;
    right: 0;
    right: calc(50vw - 480px);
    width: 312px;
    margin: 0;
    padding: 0;
    z-index: 1;
  }
  #toc h2 {
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 2em;
    overflow: auto;
    overscroll-behavior: contain;
    scrollbar-width: thin;
  }
  #toc nav > ul  {
    margin-bottom: 2em;
  }
  #toc ul {
    margin: 0 0 0 4px;
    font-size: var(--small-font-size);
  }
  #toc ul :is(p, li) {
    margin: 2px 0;
    line-height: 22px;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {
    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
}

/* Changes introduced to fix issues found during implementation */

/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}

/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin: 8px 0.5em 0;
}

/* Provide styling for table cell text alignment */
table .text-left {
  text-align: left;
}
table .text-center {
  text-align: center;
}
table .text-right {
  text-align: right;
}

/* Make the alternative author contact information look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 20em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Give the table caption label the same styling as the figcaption */

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  dd {
    page-break-before: avoid;
  }
  .vcard {
    page-break-inside: avoid;
  }

}

/* Dark mode. */
@media (prefers-color-scheme: dark) {
:root {
  --background-color: #121212;
  --text-color: #f0f0f0;
  --title-color: #fff;
  --link-color: #4da4f0;
  --highlight-color: #282828;
  --line-color: #444;
  --pilcrow-weak: #444;
  --pilcrow-strong: #666;
  scrollbar-color: #777 #333;
}
}

/* SVG Trick: a prefix match works because only black and white are allowed */
svg :is([stroke="black"], [stroke^="#000"]) {
  stroke: var(--text-color);
}
svg :is([stroke="white"], [stroke^="#fff"]) {
  stroke: var(--background-color);
}
svg :is([fill="black"], [fill^="#000"], :not([fill])) {
  fill: var(--text-color);
}
svg :is([fill="white"], [fill^="#fff"]) {
  fill: var(--background-color);
}
</style>

</head>
<body class="xml2rfc">
<table class="ears">
<thead><tr>
<td class="left"></td>
<td class="center">vc-sd-jwt</td>
<td class="right">May 2023</td>
</tr></thead>
<tfoot><tr>
<td class="left">Terbu &amp; Fett</td>
<td class="center">Standards Track</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-workgroup">Workgroup:</dt>
<dd class="workgroup">TBD</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2023-05-16" class="published">16 May 2023</time>
    </dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">O. Terbu</div>
<div class="org">Spruce Systems, Inc.</div>
</div>
<div class="author">
      <div class="author-name">D. Fett</div>
<div class="org">Authlete Inc.</div>
</div>
</dd>
</dl>
</div>
<h1 id="title">Verifiable Credentials based on SD-JWT with JSON payloads</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">This specification describes data formats, validation and processing rules to
express Verifiable Credentials based on the securing mechanisms of SD-JWT
(TBD: see oauth-selective-disclosure-jwt) and JSON payloads.<a href="#section-abstract-1" class="pilcrow">¶</a></p>
</section>
<div id="toc">
<section id="section-toc.1">
        <a href="#" onclick="scroll(0,0)" class="toplink">▲</a><h2 id="name-table-of-contents">
<a href="#name-table-of-contents" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1" class="keepWithNext"><a href="#section-1" class="auto internal xref">1</a>.  <a href="#name-introduction" class="internal xref">Introduction</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.1">
                <p id="section-toc.1-1.1.2.1.1" class="keepWithNext"><a href="#section-1.1" class="auto internal xref">1.1</a>.  <a href="#name-requirements-notation-and-c" class="internal xref">Requirements Notation and Conventions</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.2">
                <p id="section-toc.1-1.1.2.2.1" class="keepWithNext"><a href="#section-1.2" class="auto internal xref">1.2</a>.  <a href="#name-terms-and-definitions" class="internal xref">Terms and Definitions</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1"><a href="#section-2" class="auto internal xref">2</a>.  <a href="#name-scope" class="internal xref">Scope</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a href="#section-3" class="auto internal xref">3</a>.  <a href="#name-use-cases" class="internal xref">Use Cases</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a href="#section-4" class="auto internal xref">4</a>.  <a href="#name-verifiable-credentials" class="internal xref">Verifiable Credentials</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.1">
                <p id="section-toc.1-1.4.2.1.1"><a href="#section-4.1" class="auto internal xref">4.1</a>.  <a href="#name-data-format" class="internal xref">Data Format</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.1.2.1">
                    <p id="section-toc.1-1.4.2.1.2.1.1"><a href="#section-4.1.1" class="auto internal xref">4.1.1</a>.  <a href="#name-header-parameters" class="internal xref">Header Parameters</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.1.2.2">
                    <p id="section-toc.1-1.4.2.1.2.2.1"><a href="#section-4.1.2" class="auto internal xref">4.1.2</a>.  <a href="#name-payload" class="internal xref">Payload</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2">
                <p id="section-toc.1-1.4.2.2.1"><a href="#section-4.2" class="auto internal xref">4.2</a>.  <a href="#name-example" class="internal xref">Example</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.3">
                <p id="section-toc.1-1.4.2.3.1"><a href="#section-4.3" class="auto internal xref">4.3</a>.  <a href="#name-validation-rules-and-proces" class="internal xref">Validation Rules and Processing</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.3.2.1">
                    <p id="section-toc.1-1.4.2.3.2.1.1"><a href="#section-4.3.1" class="auto internal xref">4.3.1</a>.  <a href="#name-jwt-issuer-metadata" class="internal xref">JWT Issuer Metadata</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a href="#section-5" class="auto internal xref">5</a>.  <a href="#name-verifiable-presentations" class="internal xref">Verifiable Presentations</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.1">
                <p id="section-toc.1-1.5.2.1.1"><a href="#section-5.1" class="auto internal xref">5.1</a>.  <a href="#name-examples" class="internal xref">Examples</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.2">
                <p id="section-toc.1-1.5.2.2.1"><a href="#section-5.2" class="auto internal xref">5.2</a>.  <a href="#name-validation-rules-and-process" class="internal xref">Validation Rules and Processing</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a href="#section-6" class="auto internal xref">6</a>.  <a href="#name-security-considerations" class="internal xref">Security Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a href="#section-7" class="auto internal xref">7</a>.  <a href="#name-privacy-considerations" class="internal xref">Privacy Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a href="#section-8" class="auto internal xref">8</a>.  <a href="#name-relationships-to-other-docu" class="internal xref">Relationships to Other Documents</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.1">
                <p id="section-toc.1-1.8.2.1.1"><a href="#section-8.1" class="auto internal xref">8.1</a>.  <a href="#name-w3c-verifiable-credential-d" class="internal xref">W3C Verifiable Credential Data Model 2.0</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.1.2.1">
                    <p id="section-toc.1-1.8.2.1.2.1.1"><a href="#section-8.1.1" class="auto internal xref">8.1.1</a>.  <a href="#name-vc-directory" class="internal xref">VC Directory</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.1.2.2">
                    <p id="section-toc.1-1.8.2.1.2.2.1"><a href="#section-8.1.2" class="auto internal xref">8.1.2</a>.  <a href="#name-mapping-algorithm" class="internal xref">Mapping Algorithm</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a href="#section-9" class="auto internal xref">9</a>.  <a href="#name-normative-references" class="internal xref">Normative References</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a href="#section-10" class="auto internal xref">10</a>. <a href="#name-informative-references" class="internal xref">Informative References</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11">
            <p id="section-toc.1-1.11.1"><a href="#appendix-A" class="auto internal xref">Appendix A</a>.  <a href="#name-iana-considerations" class="internal xref">IANA Considerations</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11.2.1">
                <p id="section-toc.1-1.11.2.1.1"><a href="#appendix-A.1" class="auto internal xref">A.1</a>.  <a href="#name-json-web-token-claims-regis" class="internal xref">JSON Web Token Claims Registration</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11.2.2">
                <p id="section-toc.1-1.11.2.2.1"><a href="#appendix-A.2" class="auto internal xref">A.2</a>.  <a href="#name-media-types-registry" class="internal xref">Media Types Registry</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11.2.2.2.1">
                    <p id="section-toc.1-1.11.2.2.2.1.1"><a href="#appendix-A.2.1" class="auto internal xref">A.2.1</a>.  <a href="#name-application-vcsd-jwt" class="internal xref">application/vc+sd-jwt</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11.2.2.2.2">
                    <p id="section-toc.1-1.11.2.2.2.2.1"><a href="#appendix-A.2.2" class="auto internal xref">A.2.2</a>.  <a href="#name-application-vpsd-jwt" class="internal xref">application/vp+sd-jwt</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12">
            <p id="section-toc.1-1.12.1"><a href="#appendix-B" class="auto internal xref">Appendix B</a>.  <a href="#name-acknowledgements" class="internal xref">Acknowledgements</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13">
            <p id="section-toc.1-1.13.1"><a href="#appendix-C" class="auto internal xref">Appendix C</a>.  <a href="#name-document-history" class="internal xref">Document History</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.14">
            <p id="section-toc.1-1.14.1"><a href="#appendix-D" class="auto internal xref"></a><a href="#name-authors-addresses" class="internal xref">Authors' Addresses</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<div id="introduction">
<section id="section-1">
      <h2 id="name-introduction">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction" class="section-name selfRef">Introduction</a>
      </h2>
<p id="section-1-1">A Verifiable Credential is an tamper-evident statement made by an Issuer about
a Subject of the Verifiable Credential. Verifiable Credentials are issued to
Holders which can present Verifiable Credentials to Verifiers typically in form
of Verifiable Presentations.<a href="#section-1-1" class="pilcrow">¶</a></p>
<p id="section-1-2">These relationships are described by the three-party-model which involves the
following parties:<a href="#section-1-2" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-1-3">
<li id="section-1-3.1">Issuer: The entity that issues the Verifiable Credential to the Holder, who
is tthe person or entity being issued the credential.<a href="#section-1-3.1" class="pilcrow">¶</a>
</li>
        <li id="section-1-3.2">Verifier: The entity that verifies the Verifiable Credential presented by
the Subject, for example to prove eligibility to access certain services.<a href="#section-1-3.2" class="pilcrow">¶</a>
</li>
        <li id="section-1-3.3">Holder: The person or entity being issued the Verifiable Credential, who
may present the Verifiable Credential to a Verifier for verification.<a href="#section-1-3.3" class="pilcrow">¶</a>
</li>
      </ol>
<p id="section-1-4">Verifiers have to trust Issuers to make
trustworthy statements about the Subject and they can additionally require that
the Holder provides a proof that they are the intended Holder of the Verifiable
Credential which can important for security reasons. This is only possible if
an Issuer binds the Verifiable Credential to a specific Holder at the time of
issuance.<a href="#section-1-4" class="pilcrow">¶</a></p>
<p id="section-1-5">Signed JSON Web Tokens (JWTs) <span>[<a href="#RFC7519" class="cite xref">RFC7519</a>]</span> can in principle be used to express
Verifiable Credentials in a way that is easy to understand and process as it
builds upon established web primitives. However, JWTs do not support selective
disclosure, i.e., the ability to disclose only a subset of the claims contained
in the JWT. This is a common problem in the so-called three-party model: An
Issuer creates a Verifiable Credential for some End-User (Holder), who then
presents this credential to multiple Verifiers. A credential might contain a
large number of claims, but the Holder typically only wants to disclose a subset
of these claims to a Verifier. In this case, the Holder would have to receive a
new signed JWT from the Issuer, containing only the claims that should be
disclosed, for each interaction with a new Verifier. This is inefficient,
costly, and the necessary interaction with the Issuer introduces additional
privacy risks.<a href="#section-1-5" class="pilcrow">¶</a></p>
<p id="section-1-6">SD-JWT is a specification that introduces conventions to support selective
disclosure for JWTs: For an SD-JWT document, a Holder can decide which claims to
release (within bounds defined by the Issuer). This format is therefore
perfectly suitable for Verifiable Credentials.<a href="#section-1-6" class="pilcrow">¶</a></p>
<p id="section-1-7">SD-JWT itself does not define the claims that must be used within the payload of
the token or their semantics. This specification therefore defines how
Verifiable Credentials can be expressed using SD-JWT.<a href="#section-1-7" class="pilcrow">¶</a></p>
<p id="section-1-8">JWTs are used to protect the integrity of JSON payloads, which
can contain claims that are registered in the IANA JWT Claim Registry, as well
as public and private claims. Private claims are not relevant for this
specification due to the openness of the three-party-model. Since SD-JWTs are
based on JWTs, this specification aims to express the basic Verifiable Credential
data model purely through JSON payloads, using registered claims while allowing
Issuers to use additional registered claims, as well as new or existing public
claims, to make statements about the Subject of the Verifiable Credential.<a href="#section-1-8" class="pilcrow">¶</a></p>
<div id="requirements-notation-and-conventions">
<section id="section-1.1">
        <h3 id="name-requirements-notation-and-c">
<a href="#section-1.1" class="section-number selfRef">1.1. </a><a href="#name-requirements-notation-and-c" class="section-name selfRef">Requirements Notation and Conventions</a>
        </h3>
<p id="section-1.1-1">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD",
"SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and "OPTIONAL" in this
document are to be interpreted as described in RFC 2119 <span>[<a href="#RFC2119" class="cite xref">RFC2119</a>]</span>.<a href="#section-1.1-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="terms-and-definitions">
<section id="section-1.2">
        <h3 id="name-terms-and-definitions">
<a href="#section-1.2" class="section-number selfRef">1.2. </a><a href="#name-terms-and-definitions" class="section-name selfRef">Terms and Definitions</a>
        </h3>
<span class="break"></span><dl class="dlParallel" id="section-1.2-1">
          <dt id="section-1.2-1.1">Verifiable Credential:</dt>
          <dd style="margin-left: 1.5em" id="section-1.2-1.2">TBD<a href="#section-1.2-1.2" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.2-1.3">Credential:</dt>
          <dd style="margin-left: 1.5em" id="section-1.2-1.4">TBD<a href="#section-1.2-1.4" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.2-1.5">Verifiable Presentation:</dt>
          <dd style="margin-left: 1.5em" id="section-1.2-1.6">TBD<a href="#section-1.2-1.6" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.2-1.7">Issuer:</dt>
          <dd style="margin-left: 1.5em" id="section-1.2-1.8">An entity that issues a Verifiable Credential.<a href="#section-1.2-1.8" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.2-1.9">Holder:</dt>
          <dd style="margin-left: 1.5em" id="section-1.2-1.10">An entity that receives Verifiable Credentials from the Issuer and has
control over them. Holders present Verifiable Credentials as Verifiable
Presentations to Verifiers and can prove control over them.<a href="#section-1.2-1.10" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.2-1.11">Verifier:</dt>
          <dd style="margin-left: 1.5em" id="section-1.2-1.12">An entity that requests, validates and processes Verifiable Credentials and
Verifiable Presenations.<a href="#section-1.2-1.12" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.2-1.13">Verifiable Credential based on SD-JWT (VC-SD-JWT):</dt>
          <dd style="margin-left: 1.5em" id="section-1.2-1.14">Refers to SD-JWT Combined Format for Issuance [see TBD] that complies with
this specification. In the three-party-model, this representation is used for
the Verifiable Credential and is transferred from the Issuer to the Holder.<a href="#section-1.2-1.14" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.2-1.15">Verifiable Presentation based on SD-JWT (VP-SD-JWT):</dt>
          <dd style="margin-left: 1.5em" id="section-1.2-1.16">Refers to SD-JWT Combined Format for Presentation [see TBD] that complies
with this specification. In the three-party-model, this representation is used
for the Verifiable Presentation and is transferred from the Issuer to the
Holder.<a href="#section-1.2-1.16" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.2-1.17">Credential based on SD-JWT (C-SD-JWT):</dt>
          <dd style="margin-left: 1.5em" id="section-1.2-1.18">Refers to the original unsecured JSON payload of the VC-SD-JWT.<a href="#section-1.2-1.18" class="pilcrow">¶</a>
</dd>
        <dd class="break"></dd>
</dl>
</section>
</div>
</section>
</div>
<div id="scope">
<section id="section-2">
      <h2 id="name-scope">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-scope" class="section-name selfRef">Scope</a>
      </h2>
<ul class="normal">
<li class="normal" id="section-2-1.1">
          <p id="section-2-1.1.1">This specification defines<a href="#section-2-1.1.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2-1.1.2.1">Data model and media types for Verifiable Credentials and Presentations based on SD-JWTs.<a href="#section-2-1.1.2.1" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-2-1.1.2.2">Validation and processing rules for Verifiers<a href="#section-2-1.1.2.2" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-2-1.1.2.3">Mapping mechanisms to related other data models<a href="#section-2-1.1.2.3" class="pilcrow">¶</a>
</li>
          </ul>
</li>
      </ul>
</section>
</div>
<div id="use-cases">
<section id="section-3">
      <h2 id="name-use-cases">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-use-cases" class="section-name selfRef">Use Cases</a>
      </h2>
<p id="section-3-1">TBD: explain use cases of the three-party-model.<a href="#section-3-1" class="pilcrow">¶</a></p>
<p id="section-3-2">TBD: conventional crypt, hardware security, hsm, mobile secure area,
compliance with FIPS<a href="#section-3-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="verifiable-credentials">
<section id="section-4">
      <h2 id="name-verifiable-credentials">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-verifiable-credentials" class="section-name selfRef">Verifiable Credentials</a>
      </h2>
<p id="section-4-1">This specification defines the media type <code>vc+sd-jwt</code> which describes a
VC-SD-JWT with the following components:<a href="#section-4-1" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-4-2">
<li id="section-4-2.1">An SD-JWT to protect the integrity of the claims, to enable selective disclosure and to ensure authorship of the VC-SD-JWT. The SD-JWT header parameters and the payload is further defined by this specification.<a href="#section-4-2.1" class="pilcrow">¶</a>
</li>
        <li id="section-4-2.2">The full set of SD-JWT Disclosures that contain the claims in plain text.<a href="#section-4-2.2" class="pilcrow">¶</a>
</li>
      </ol>
<div id="data-format">
<section id="section-4.1">
        <h3 id="name-data-format">
<a href="#section-4.1" class="section-number selfRef">4.1. </a><a href="#name-data-format" class="section-name selfRef">Data Format</a>
        </h3>
<div id="header-parameters">
<section id="section-4.1.1">
          <h4 id="name-header-parameters">
<a href="#section-4.1.1" class="section-number selfRef">4.1.1. </a><a href="#name-header-parameters" class="section-name selfRef">Header Parameters</a>
          </h4>
<p id="section-4.1.1-1">The <code>typ</code> header parameter of the SD-JWT MUST be present. The <code>typ</code> value MUST
use <code>vc+sd-jwt</code>. This indicates that the payload of the SD-JWT contains plain
JSON and follows the rules as defined in this specification. It further
indicates that the SD-JWT is a SD-JWT component of a VC-SD-JWT.<a href="#section-4.1.1-1" class="pilcrow">¶</a></p>
<p id="section-4.1.1-2">The following is a non-normative example of a decoded SD-JWT header:<a href="#section-4.1.1-2" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-4.1.1-3">
<pre>{
  "alg": "ES256",
  "typ": "vc+sd-jwt"
}
</pre><a href="#section-4.1.1-3" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="payload">
<section id="section-4.1.2">
          <h4 id="name-payload">
<a href="#section-4.1.2" class="section-number selfRef">4.1.2. </a><a href="#name-payload" class="section-name selfRef">Payload</a>
          </h4>
<p id="section-4.1.2-1">VC-SD-JWTs and VP-SD-JWTs can use any
claim registered in the "JSON Web Token Claims" registry as defined in
<span>[<a href="#RFC7519" class="cite xref">RFC7519</a>]</span>.<a href="#section-4.1.2-1" class="pilcrow">¶</a></p>
<p id="section-4.1.2-2">Some of the claims in a VC MUST NOT be selectively disclosed as they are
always required for processing on the verifier side. All other claims can be
made selectively disclosable by the issuer when issuing the respective
VC-SD-JWT.<a href="#section-4.1.2-2" class="pilcrow">¶</a></p>
<p id="section-4.1.2-3">VC-SD-JWTs and VP-SD-JWTs MAY contain additional
registered or public claims depending on the application.<a href="#section-4.1.2-3" class="pilcrow">¶</a></p>
<div id="type-claim">
<section id="section-4.1.2.1">
            <h5 id="name-type-claim">
<a href="#section-4.1.2.1" class="section-number selfRef">4.1.2.1. </a><a href="#name-type-claim" class="section-name selfRef"><code>type</code> claim</a>
            </h5>
<p id="section-4.1.2.1-1">This specification defines the JWT claim <code>type</code>. The <code>type</code> claim is used
to express the type of the JSON object that is secured by the
JWT. The <code>type</code> value MUST be a case-sensitive <code>StringOrURI</code> value.<a href="#section-4.1.2.1-1" class="pilcrow">¶</a></p>
<p id="section-4.1.2.1-2">The following is a non-normative example of how <code>type</code> is used to express
a type:<a href="#section-4.1.2.1-2" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-4.1.2.1-3">
<pre>{
  "type": "SomeType"
}
</pre><a href="#section-4.1.2.1-3" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="usage-of-registered-jwt-claims">
<section id="section-4.1.2.2">
            <h5 id="name-usage-of-registered-jwt-cla">
<a href="#section-4.1.2.2" class="section-number selfRef">4.1.2.2. </a><a href="#name-usage-of-registered-jwt-cla" class="section-name selfRef">Usage of registered JWT Claims</a>
            </h5>
<p id="section-4.1.2.2-1">The following are non-selectively disclosable registered JWT claims that
SD-JWTs of VC-SD-JWTs contain for specific purposes:<a href="#section-4.1.2.2-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.1.2.2-2.1">
                <p id="section-4.1.2.2-2.1.1"><code>iss</code><a href="#section-4.1.2.2-2.1.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.1.2.2-2.1.2.1">REQUIRED. The issuer of the Verifiable Credential. The value of <code>iss</code>
MUST be a URI. See <span>[<a href="#RFC7519" class="cite xref">RFC7519</a>]</span> for more information.<a href="#section-4.1.2.2-2.1.2.1" class="pilcrow">¶</a>
</li>
                </ul>
</li>
              <li class="normal" id="section-4.1.2.2-2.2">
                <p id="section-4.1.2.2-2.2.1"><code>iat</code><a href="#section-4.1.2.2-2.2.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.1.2.2-2.2.2.1">REQUIRED. The time of issuance of the Verifiable Credential. See <span>[<a href="#RFC7519" class="cite xref">RFC7519</a>]</span>
for more information.<a href="#section-4.1.2.2-2.2.2.1" class="pilcrow">¶</a>
</li>
                </ul>
</li>
              <li class="normal" id="section-4.1.2.2-2.3">
                <p id="section-4.1.2.2-2.3.1"><code>nbf</code><a href="#section-4.1.2.2-2.3.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.1.2.2-2.3.2.1">REQUIRED. The time before which the Verifiable Credential MUST NOT be
accepted before validating. See <span>[<a href="#RFC7519" class="cite xref">RFC7519</a>]</span> for more information.<a href="#section-4.1.2.2-2.3.2.1" class="pilcrow">¶</a>
</li>
                </ul>
</li>
              <li class="normal" id="section-4.1.2.2-2.4">
                <p id="section-4.1.2.2-2.4.1"><code>exp</code><a href="#section-4.1.2.2-2.4.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.1.2.2-2.4.2.1">REQUIRED. The expiry time of the Verifiable Credential after which the
proof of the Verifiable Credential is no longer valid. See <span>[<a href="#RFC7519" class="cite xref">RFC7519</a>]</span> for more
information.<a href="#section-4.1.2.2-2.4.2.1" class="pilcrow">¶</a>
</li>
                </ul>
</li>
              <li class="normal" id="section-4.1.2.2-2.5">
                <p id="section-4.1.2.2-2.5.1"><code>cnf</code><a href="#section-4.1.2.2-2.5.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.1.2.2-2.5.2.1">OPTIONAL. The confirmation method can be used to verify the holder
binding of the Verifiable Presentation. See <span>[<a href="#RFC7800" class="cite xref">RFC7800</a>]</span> for more information.<a href="#section-4.1.2.2-2.5.2.1" class="pilcrow">¶</a>
</li>
                </ul>
</li>
              <li class="normal" id="section-4.1.2.2-2.6">
                <p id="section-4.1.2.2-2.6.1"><code>type</code><a href="#section-4.1.2.2-2.6.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.1.2.2-2.6.2.1">REQUIRED. The type of the Verifiable Credential, e.g.,
<code>IdentityCredential</code>. The claims belonging to the type can be contained in
different components of the VC-SD-JWT, e.g., SD-JWT or Disclosures.<a href="#section-4.1.2.2-2.6.2.1" class="pilcrow">¶</a>
</li>
                </ul>
</li>
              <li class="normal" id="section-4.1.2.2-2.7">
                <p id="section-4.1.2.2-2.7.1"><code>status</code><a href="#section-4.1.2.2-2.7.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.1.2.2-2.7.2.1">OPTIONAL. The information on how to read the status of the Verifiable
Credential. See TBD for more information.<a href="#section-4.1.2.2-2.7.2.1" class="pilcrow">¶</a>
</li>
                </ul>
</li>
            </ul>
<p id="section-4.1.2.2-3">The following are selectively disclosable registered JWT claims that
SD-JWTs of VC-SD-JWTs contain for specific purposes:<a href="#section-4.1.2.2-3" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.1.2.2-4.1">
                <p id="section-4.1.2.2-4.1.1"><code>sub</code><a href="#section-4.1.2.2-4.1.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.1.2.2-4.1.2.1">OPTIONAL. The identifier of the Subject of the Verifiable Credential.
The value of <code>sub</code> MUST be a URI. The Issuer MAY use it to provide the Subject
identifier assigned and maintained by the Issuer. There is no requirement for
a binding to exist between <code>sub</code> and <code>cnf</code> claims.<a href="#section-4.1.2.2-4.1.2.1" class="pilcrow">¶</a>
</li>
                </ul>
</li>
            </ul>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="example">
<section id="section-4.2">
        <h3 id="name-example">
<a href="#section-4.2" class="section-number selfRef">4.2. </a><a href="#name-example" class="section-name selfRef">Example</a>
        </h3>
<p id="section-4.2-1">The following is a non-normative example of a Credential acting as the input
for the VC-SD-JWT:<a href="#section-4.2-1" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-4.2-2">
<pre>{
   "iss":"https://example.com",
   "nbf":1541493724,
   "iat":1541493724,
   "cnf":{
      "jwk":{
         "kty":"RSA",
         "n":"0vx7agoebGcQSuuPiLJXZptN9nndrQmbXEps2aiAFbWhM78LhWx4cbbf
           AAtVT86zwu1RK7aPFFxuhDR1L6tSoc_BJECPebWKRXjBZCiFV4n3oknjhMst
           n64tZ_2W-5JsGY4Hc5n9yBXArwl93lqt7_RN5w6Cf0h4QyQ5v-65YGjQR0_F
           DW2QvzqY368QQMicAtaSqzs8KJZgnYb9c7d0zgdAZHzu6qMQvRL5hajrn1n9
           1CbOpbISD08qNLyrdkt-bFTWhAI4vMQFh6WeZu0fM4lFd2NcRwr3XPksINHa
           Q-G_xBniIqbw0Ls1jF44-csFCur-kEgU8awapJzKnqDKgw”,
         "e":"AQAB"
      }
   },
   "type":"IdentityCredential",
   "given_name":"John",
   "family_name":"Doe",
   "email":"johndoe@example.com",
   "phone_number":"+1-202-555-0101",
   "address":{
      "street_address":"123 Main St",
      "locality":"Anytown",
      "region":"Anystate",
      "country":"US"
   },
   "birthdate":"1940-01-01",
   "is_over_18":true,
   "is_over_21":true,
   "is_over_65":true
}
</pre><a href="#section-4.2-2" class="pilcrow">¶</a>
</div>
<p id="section-4.2-3">The following is a non-normative example of how the Credential above can be
used in a SD-JWT where the resulting VC-SD-JWT contains only claims about
the Subject that are selectively disclosable:<a href="#section-4.2-3" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-4.2-4">
<pre>{
   "iss":"https://example.com",
   "iat":1541493724,
   "exp":1735689661,
   "nbf":1541493724,
   "cnf":{
      "jwk":{
         "kty":"RSA",
         "n":"0vx7agoebGcQSuuPiLJXZptN9nndrQmbXEps2aiAFbWhM78LhWx4cbbf
           AAtVT86zwu1RK7aPFFxuhDR1L6tSoc_BJECPebWKRXjBZCiFV4n3oknjhMst
           n64tZ_2W-5JsGY4Hc5n9yBXArwl93lqt7_RN5w6Cf0h4QyQ5v-65YGjQR0_F
           DW2QvzqY368QQMicAtaSqzs8KJZgnYb9c7d0zgdAZHzu6qMQvRL5hajrn1n9
           1CbOpbISD08qNLyrdkt-bFTWhAI4vMQFh6WeZu0fM4lFd2NcRwr3XPksINHa
           Q-G_xBniIqbw0Ls1jF44-csFCur-kEgU8awapJzKnqDKgw",
         "e":"AQAB"
      }
   },
   "type":"IdentityCredential",
   "_sd":[
      "2cj0qo1YI8aGLOPCEzIr0mexil6_9tVz5KnIpY3fszs",
      "H033gGqGyBCT7VmtYky-1gqqTg9JT8kg9WFJTTN1iVY",
      "RKE58nhM1GLxUmfvPaZhxNEq8kNplQYnOZlLJosLomY",
      "S7ebWHiOEgQDLG6JcpYkuMKMCb40uxFUSUimK94MuDc",
      "WkP5oQu7qxPAxLVPKcFuP4rD5TC0T4CekiYi333zQP4",
      "f4nimkh9dcwJ8JK46zlad_zgyYJfZFPImAWBNh86Kb0",
      "goqT4HD2DOmnPF1wNMLNiYuj4SgYtKjfQQHO--CSh0o",
      "lheBqvJLJPRLsoXVF68rmkn9jL73iGCF0V5sJjPlt68",
      "tAQ3Er6qd3UwQLrZYRe3fMF4J6MXdz5tJMJfJw48I0g"
   ],
   "_sd_alg":"sha-256"
}
</pre><a href="#section-4.2-4" class="pilcrow">¶</a>
</div>
<p id="section-4.2-5">The following are Disclosures of the non-normative example from above:<a href="#section-4.2-5" class="pilcrow">¶</a></p>
<p id="section-4.2-6"><em>Disclosure for given_name:</em><a href="#section-4.2-6" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.2-7.1">SHA-256 Hash: <code>f4nimkh9dcwJ8JK46zlad_zgyYJfZFPImAWBNh86Kb0</code><a href="#section-4.2-7.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-4.2-7.2">Disclosure: <code>WyJuWUpCd1Q0OERQTEtYcVd1UmJ4NVNRIiwgImdpdmVuX25hbWUiLCAiSm9obiJd</code><a href="#section-4.2-7.2" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-4.2-7.3">Contents:<a href="#section-4.2-7.3" class="pilcrow">¶</a>
</li>
        </ul>
<div class="alignLeft art-text artwork" id="section-4.2-8">
<pre>["nYJBwT48DPLKXqWuRbx5SQ", "given_name", "John"]
</pre><a href="#section-4.2-8" class="pilcrow">¶</a>
</div>
<p id="section-4.2-9">TBD: add other disclosures.<a href="#section-4.2-9" class="pilcrow">¶</a></p>
</section>
</div>
<div id="validation-rules-and-processing">
<section id="section-4.3">
        <h3 id="name-validation-rules-and-proces">
<a href="#section-4.3" class="section-number selfRef">4.3. </a><a href="#name-validation-rules-and-proces" class="section-name selfRef">Validation Rules and Processing</a>
        </h3>
<p id="section-4.3-1">A Verifier MUST validate an VC-SD-JWT as follows:<a href="#section-4.3-1" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-4.3-2">
<li id="section-4.3-2.1">REQUIRED. Verify the SD-JWT as defined in Section 6.2 of (TBD: see
oauth-selective-disclosure-jwt). For the verification, the <code>iss</code> claim in the
SD-JWT MAY be used to retrieve the public key from the JWT Issuer Metadata
configuration (as defined in {#jwt-issuer-metadata}) of the VC-SD-JWT issuer.
A verifier MAY use alternative methods to obtain the public key to verify the
signature of the SD-JWT.<a href="#section-4.3-2.1" class="pilcrow">¶</a>
</li>
          <li id="section-4.3-2.2">OPTIONAL. If <code>status</code> is present in the verified payload of the SD-JWT,
the status SHOULD be checked. It depends on the Verifier policy to reject or
accept an VP-SD-JWT based on the status of the Verifiable Credential.<a href="#section-4.3-2.2" class="pilcrow">¶</a>
</li>
        </ol>
<p id="section-4.3-3">Additional validation rules MAY apply, but their use is out of the scope of
this specification.<a href="#section-4.3-3" class="pilcrow">¶</a></p>
<div id="jwt-issuer-metadata">
<section id="section-4.3.1">
          <h4 id="name-jwt-issuer-metadata">
<a href="#section-4.3.1" class="section-number selfRef">4.3.1. </a><a href="#name-jwt-issuer-metadata" class="section-name selfRef">JWT Issuer Metadata</a>
          </h4>
<p id="section-4.3.1-1">This specification defines the JWT Issuer Metadata to retrieve the JWT Issuer
Metadata configuration of the JWT Issuer of the JWT. The JWT Issuer is
identified by the <code>iss</code> claim in the JWT. Use of the JWT Issuer Metadata
is OPTIONAL.<a href="#section-4.3.1-1" class="pilcrow">¶</a></p>
<p id="section-4.3.1-2">JWT Issuers publishing JWT Issuer Metadata MUST make a JWT Issuer Metadata
configuration available at the path formed by concatenating the string
<code>/.well-known/jwt-issuer</code> to the <code>iss</code> claim value in the JWT. The <code>iss</code> MUST
be a case-sensitive URL using the HTTPS scheme that contains scheme, host and,
optionally, port number and path components, but no query or fragment
components.<a href="#section-4.3.1-2" class="pilcrow">¶</a></p>
<p id="section-4.3.1-3">The JWT Issuer Metadata configuration MUST be a JSON document compliant with
this specification and MUST be returned using the <code>application/json</code> content
type.<a href="#section-4.3.1-3" class="pilcrow">¶</a></p>
<p id="section-4.3.1-4">This specification defines the following JWT Issuer Metadata parameters:<a href="#section-4.3.1-4" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.3.1-5.1">
              <p id="section-4.3.1-5.1.1"><code>jwks_uri</code><a href="#section-4.3.1-5.1.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.3.1-5.1.2.1">OPTIONAL. URL string referencing the JWT Issuer's JSON Web Key (JWK) Set
<span>[<a href="#RFC7517" class="cite xref">RFC7517</a>]</span> document which contains the JWT Issuer's public keys. The value of
this field MUST point to a valid JWK Set document. Use of this parameter is
RECOMMENDED, as it allows for easy key rotation.<a href="#section-4.3.1-5.1.2.1" class="pilcrow">¶</a>
</li>
              </ul>
</li>
            <li class="normal" id="section-4.3.1-5.2">
              <p id="section-4.3.1-5.2.1"><code>jwks</code><a href="#section-4.3.1-5.2.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.3.1-5.2.2.1">OPTIONAL. JWT Issuer's JSON Web Key Set [RFC7517] document value, which
contains the JWT Issuer's public keys. The value of this field MUST be a JSON
object containing a valid JWK Set. This parameter is intended to be used by JWT
Issuer that cannot use the <code>jwks_uri</code> parameter.<a href="#section-4.3.1-5.2.2.1" class="pilcrow">¶</a>
</li>
              </ul>
</li>
          </ul>
<p id="section-4.3.1-6">JWT Issuer Metadata MUST include either <code>jwks_uri</code> or <code>jwks</code> in their JWT
Issuer Metadata, but not both.<a href="#section-4.3.1-6" class="pilcrow">¶</a></p>
<p id="section-4.3.1-7">It is RECOMMENDED that the JWT contains a <code>kid</code> JWT header parameter that can
be used to lookup the public key in the JWK Set included by value or referenced
in the JWT Issuer Metadata.<a href="#section-4.3.1-7" class="pilcrow">¶</a></p>
<p id="section-4.3.1-8">The following is a non-normative example of a JWT Issuer Metadata including
<code>jwks</code>:<a href="#section-4.3.1-8" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-4.3.1-9">
<pre>{
   "jwks":{
      "keys":[
         {
            "e":"AQAB",
            "n":"nj3YJwsLUFl9BmpAbkOswCNVx17Eh9wMO-_AReZwBqfaWFcfG
   HrZXsIV2VMCNVNU8Tpb4obUaSXcRcQ-VMsfQPJm9IzgtRdAY8NN8Xb7PEcYyk
   lBjvTtuPbpzIaqyiUepzUXNDFuAOOkrIol3WmflPUUgMKULBN0EUd1fpOD70p
   RM0rlp_gg_WNUKoW1V-3keYUJoXH9NztEDm_D2MQXj9eGOJJ8yPgGL8PAZMLe
   2R7jb9TxOCPDED7tY_TU4nFPlxptw59A42mldEmViXsKQt60s1SLboazxFKve
   qXC_jpLUt22OC6GUG63p-REw-ZOr3r845z50wMuzifQrMI9bQ",
            "kty":"RSA"
         }
      ]
   }
}
</pre><a href="#section-4.3.1-9" class="pilcrow">¶</a>
</div>
<p id="section-4.3.1-10">The following is a non-normative example of a JWT Issuer Metadata including
<code>jwks_uri</code>:<a href="#section-4.3.1-10" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-4.3.1-11">
<pre>{
   "jwks_uri":"https://jwt-issuer.example.org/my_public_keys.jwks"
}
</pre><a href="#section-4.3.1-11" class="pilcrow">¶</a>
</div>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="verifiable-presentations">
<section id="section-5">
      <h2 id="name-verifiable-presentations">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-verifiable-presentations" class="section-name selfRef">Verifiable Presentations</a>
      </h2>
<p id="section-5-1">This specification defines the media type <code>vp+sd-jwt</code> which describes the VP-SD-JWT with the following components:<a href="#section-5-1" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-5-2">
<li id="section-5-2.1">The SD-JWT from the VC-SD-JWT.<a href="#section-5-2.1" class="pilcrow">¶</a>
</li>
        <li id="section-5-2.2">A subset of the SD-JWT Disclosures that are selectively disclosed by the Holder.<a href="#section-5-2.2" class="pilcrow">¶</a>
</li>
        <li id="section-5-2.3">An optional holder binding JWT that proves the Holder is the intended Holder of the Verifiable Credential. Note, it is the responsibility for the Issuer to include a confirmation method in the Verifiable Credential. This process is referred to as holder binding. This enables the Holder to prove they are the intended Holder of the Verifiable Credential. Further note, it is up to the Verifier to require or to not require the Holder to prove posessions of the confirmation method.<a href="#section-5-2.3" class="pilcrow">¶</a>
</li>
      </ol>
<div id="examples">
<section id="section-5.1">
        <h3 id="name-examples">
<a href="#section-5.1" class="section-number selfRef">5.1. </a><a href="#name-examples" class="section-name selfRef">Examples</a>
        </h3>
<p id="section-5.1-1">The following is a non-normative example of a VP-SD-JWT without holder binding:<a href="#section-5.1-1" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-5.1-2">
<pre>TBD
</pre><a href="#section-5.1-2" class="pilcrow">¶</a>
</div>
<p id="section-5.1-3">The following is a non-normative example of a VP-SD-JWT with holder binding:<a href="#section-5.1-3" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-5.1-4">
<pre>TBD
</pre><a href="#section-5.1-4" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="validation-rules-and-processing-1">
<section id="section-5.2">
        <h3 id="name-validation-rules-and-process">
<a href="#section-5.2" class="section-number selfRef">5.2. </a><a href="#name-validation-rules-and-process" class="section-name selfRef">Validation Rules and Processing</a>
        </h3>
<p id="section-5.2-1">TBD: same as VC-SD-JWT (-&gt; refer to SD-JWT) + Holder Binding<a href="#section-5.2-1" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="security-considerations">
<section id="section-6">
      <h2 id="name-security-considerations">
<a href="#section-6" class="section-number selfRef">6. </a><a href="#name-security-considerations" class="section-name selfRef">Security Considerations</a>
      </h2>
<p id="section-6-1">TBD<a href="#section-6-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="privacy-considerations">
<section id="section-7">
      <h2 id="name-privacy-considerations">
<a href="#section-7" class="section-number selfRef">7. </a><a href="#name-privacy-considerations" class="section-name selfRef">Privacy Considerations</a>
      </h2>
<p id="section-7-1">TBD<a href="#section-7-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="relationships-to-other-documents">
<section id="section-8">
      <h2 id="name-relationships-to-other-docu">
<a href="#section-8" class="section-number selfRef">8. </a><a href="#name-relationships-to-other-docu" class="section-name selfRef">Relationships to Other Documents</a>
      </h2>
<div id="w3c-verifiable-credential-data-model-2-0">
<section id="section-8.1">
        <h3 id="name-w3c-verifiable-credential-d">
<a href="#section-8.1" class="section-number selfRef">8.1. </a><a href="#name-w3c-verifiable-credential-d" class="section-name selfRef">W3C Verifiable Credential Data Model 2.0</a>
        </h3>
<p id="section-8.1-1">The W3C VCDM 2.0 (see TBD) defines a JSON-LD vocabulary for Verifiable
Credentials and Verifiable Presentations. To interop with the W3C VCDM 2.0 data
model defined in [TBD], this specification defines mapping algorithm for
VC-SD-JWT and VP-SD-JWT to the vocabulary and data model defined W3C VCDM 2.0
which is based on JSON-LD.<a href="#section-8.1-1" class="pilcrow">¶</a></p>
<div id="vc-directory">
<section id="section-8.1.1">
          <h4 id="name-vc-directory">
<a href="#section-8.1.1" class="section-number selfRef">8.1.1. </a><a href="#name-vc-directory" class="section-name selfRef">VC Directory</a>
          </h4>
<p id="section-8.1.1-1">This specification registers the media types <code>application/vp+sd-jwt</code> and
<code>application/vc+sd-jwt</code> in the W3C Verifiable Credentials (VC) Directory.<a href="#section-8.1.1-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="mapping-algorithm">
<section id="section-8.1.2">
          <h4 id="name-mapping-algorithm">
<a href="#section-8.1.2" class="section-number selfRef">8.1.2. </a><a href="#name-mapping-algorithm" class="section-name selfRef">Mapping Algorithm</a>
          </h4>
<p id="section-8.1.2-1">The following is a uni-directional transformation algorithm that takes in a
VC-SD-JWT conformant to this specification and maps it
to the corresponding properties in the W3C VCDM 2.0
which is based on a JSON-LD vocabulary. It includes specific handling for JWT
claims used in this specification. The function returns a Verifiable
Credential object in the W3C VCDM 2.0 format.<a href="#section-8.1.2-1" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-8.1.2-2">
<pre>function get_credential_from_vc_sd_jwt(vc_sd_jwt):
  // TBD
  return credential

function map_vc_sd_jwt_to_w3c(vc_sd_jwt):

  // construct input credential (JSON object)
  credential = get_credential_from_vc_sd_jwt(vc_sd_jwt)

  return map_to_w3c(credential)

  vc = {
    "@context": [
      "https://www.w3.org/ns/credentials/v2"
    ]
  }
  vc.issuedAt = epochTimeToISO(credential.iat)
  vc.validFrom = epochTimeToISO(credential.nbf)
  vc.validUntil = epochTimeToISO(credential.exp)
  vc.id = credential.jti
  vc.issuer = credential.iss
  vc.type = credential.type

  // remove all handled claims
  credential = drop_claims(credential, ...)

  // add all remaining claims to credentialSubject
  // ignore other claims such as cnf where no corresponding
  // representation exists
  vc.credentialSubject = {
    "id": credential.sub,
    ... credential
  }

  return vc
</pre><a href="#section-8.1.2-2" class="pilcrow">¶</a>
</div>
<p id="section-8.1.2-3">The following is a uni-directional transformation algorithm from a VP-SD-JWT onto W3C Verifiable Presentations
in pseudo-code:<a href="#section-8.1.2-3" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-8.1.2-4">
<pre>function map_vc_sd_jwt_to_w3c(vc_sd_jwt):
  TBD: similar to above but using W3C VP + VC

</pre><a href="#section-8.1.2-4" class="pilcrow">¶</a>
</div>
<p id="section-8.1.2-5">####<a href="#section-8.1.2-5" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
</section>
</div>
<section id="section-9">
      <h2 id="name-normative-references">
<a href="#section-9" class="section-number selfRef">9. </a><a href="#name-normative-references" class="section-name selfRef">Normative References</a>
      </h2>
<dl class="references">
<dt id="RFC2119">[RFC2119]</dt>
      <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time datetime="1997-03" class="refDate">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7519">[RFC7519]</dt>
      <dd>
<span class="refAuthor">Jones, M.</span>, <span class="refAuthor">Bradley, J.</span>, and <span class="refAuthor">N. Sakimura</span>, <span class="refTitle">"JSON Web Token (JWT)"</span>, <span class="seriesInfo">RFC 7519</span>, <span class="seriesInfo">DOI 10.17487/RFC7519</span>, <time datetime="2015-05" class="refDate">May 2015</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7519">https://www.rfc-editor.org/info/rfc7519</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7800">[RFC7800]</dt>
    <dd>
<span class="refAuthor">Jones, M.</span>, <span class="refAuthor">Bradley, J.</span>, and <span class="refAuthor">H. Tschofenig</span>, <span class="refTitle">"Proof-of-Possession Key Semantics for JSON Web Tokens (JWTs)"</span>, <span class="seriesInfo">RFC 7800</span>, <span class="seriesInfo">DOI 10.17487/RFC7800</span>, <time datetime="2016-04" class="refDate">April 2016</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7800">https://www.rfc-editor.org/info/rfc7800</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
<section id="section-10">
      <h2 id="name-informative-references">
<a href="#section-10" class="section-number selfRef">10. </a><a href="#name-informative-references" class="section-name selfRef">Informative References</a>
      </h2>
<dl class="references">
<dt id="RFC7517">[RFC7517]</dt>
    <dd>
<span class="refAuthor">Jones, M.</span>, <span class="refTitle">"JSON Web Key (JWK)"</span>, <span class="seriesInfo">RFC 7517</span>, <span class="seriesInfo">DOI 10.17487/RFC7517</span>, <time datetime="2015-05" class="refDate">May 2015</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7517">https://www.rfc-editor.org/info/rfc7517</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
<div id="iana-considerations">
<section id="appendix-A">
      <h2 id="name-iana-considerations">
<a href="#appendix-A" class="section-number selfRef">Appendix A. </a><a href="#name-iana-considerations" class="section-name selfRef">IANA Considerations</a>
      </h2>
<div id="json-web-token-claims-registration">
<section id="appendix-A.1">
        <h3 id="name-json-web-token-claims-regis">
<a href="#appendix-A.1" class="section-number selfRef">A.1. </a><a href="#name-json-web-token-claims-regis" class="section-name selfRef">JSON Web Token Claims Registration</a>
        </h3>
<p id="appendix-A.1-1">Claim Name: "type"
   o  Claim Description: Credential Type
   o  Change Controller: IESG
   o  Specification Document(s): Section XXX of this document<a href="#appendix-A.1-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="media-types-registry">
<section id="appendix-A.2">
        <h3 id="name-media-types-registry">
<a href="#appendix-A.2" class="section-number selfRef">A.2. </a><a href="#name-media-types-registry" class="section-name selfRef">Media Types Registry</a>
        </h3>
<p id="appendix-A.2-1">TBD<a href="#appendix-A.2-1" class="pilcrow">¶</a></p>
<div id="application-vc-sd-jwt">
<section id="appendix-A.2.1">
          <h4 id="name-application-vcsd-jwt">
<a href="#appendix-A.2.1" class="section-number selfRef">A.2.1. </a><a href="#name-application-vcsd-jwt" class="section-name selfRef">application/vc+sd-jwt</a>
          </h4>
<p id="appendix-A.2.1-1">The Internet media type for a VC-SD-JWT is <code>application/vc+sd-jwt</code>.<a href="#appendix-A.2.1-1" class="pilcrow">¶</a></p>
<p id="appendix-A.2.1-2">Type name: : <code>application</code><a href="#appendix-A.2.1-2" class="pilcrow">¶</a></p>
<p id="appendix-A.2.1-3">Subtype name: : <code>vc+sd-jwt</code><a href="#appendix-A.2.1-3" class="pilcrow">¶</a></p>
<p id="appendix-A.2.1-4">Required parameters: : n/a<a href="#appendix-A.2.1-4" class="pilcrow">¶</a></p>
<p id="appendix-A.2.1-5">Optional parameters: : n/a<a href="#appendix-A.2.1-5" class="pilcrow">¶</a></p>
<p id="appendix-A.2.1-6">Encoding considerations: : 8-bit code points; VC-SD-JWT values are encoded as a
series of base64url-encoded values (some of which may be the empty string)
separated by period ('.') and tilde ('~') characters.<a href="#appendix-A.2.1-6" class="pilcrow">¶</a></p>
<p id="appendix-A.2.1-7">Security considerations: : See Security Considerations in Section TODO.<a href="#appendix-A.2.1-7" class="pilcrow">¶</a></p>
<p id="appendix-A.2.1-8">Interoperability considerations: : n/a<a href="#appendix-A.2.1-8" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="appendix-A.2.1-9.1">Published specification: : RFC TODO<a href="#appendix-A.2.1-9.1" class="pilcrow">¶</a>
</li>
            <li class="normal" id="appendix-A.2.1-9.2">Applications that use this media type: : Applications that issue, present,
verify verifiable credentials and presentations.<a href="#appendix-A.2.1-9.2" class="pilcrow">¶</a>
</li>
            <li class="normal" id="appendix-A.2.1-9.3">
              <p id="appendix-A.2.1-9.3.1">Additional information:<a href="#appendix-A.2.1-9.3.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="appendix-A.2.1-9.3.2.1">Magic number(s): n/a<a href="#appendix-A.2.1-9.3.2.1" class="pilcrow">¶</a>
</li>
                <li class="normal" id="appendix-A.2.1-9.3.2.2">File extension(s): n/a<a href="#appendix-A.2.1-9.3.2.2" class="pilcrow">¶</a>
</li>
                <li class="normal" id="appendix-A.2.1-9.3.2.3">Macintosh file type code(s): n/a<a href="#appendix-A.2.1-9.3.2.3" class="pilcrow">¶</a>
</li>
                <li class="normal" id="appendix-A.2.1-9.3.2.4">Person &amp; email address to contact for further information: TBD<a href="#appendix-A.2.1-9.3.2.4" class="pilcrow">¶</a>
</li>
                <li class="normal" id="appendix-A.2.1-9.3.2.5">Intended usage: COMMON<a href="#appendix-A.2.1-9.3.2.5" class="pilcrow">¶</a>
</li>
                <li class="normal" id="appendix-A.2.1-9.3.2.6">Restrictions on usage: none<a href="#appendix-A.2.1-9.3.2.6" class="pilcrow">¶</a>
</li>
                <li class="normal" id="appendix-A.2.1-9.3.2.7">Author: Oliver Terbu <a href="mailto:TODO@email.com">TODO@email.com</a><a href="#appendix-A.2.1-9.3.2.7" class="pilcrow">¶</a>
</li>
                <li class="normal" id="appendix-A.2.1-9.3.2.8">Change controller: IETF<a href="#appendix-A.2.1-9.3.2.8" class="pilcrow">¶</a>
</li>
              </ul>
</li>
          </ul>
</section>
</div>
<div id="application-vp-sd-jwt">
<section id="appendix-A.2.2">
          <h4 id="name-application-vpsd-jwt">
<a href="#appendix-A.2.2" class="section-number selfRef">A.2.2. </a><a href="#name-application-vpsd-jwt" class="section-name selfRef">application/vp+sd-jwt</a>
          </h4>
<p id="appendix-A.2.2-1">The Internet media type for a VC-SD-JWT is <code>application/vp+sd-jwt</code>.<a href="#appendix-A.2.2-1" class="pilcrow">¶</a></p>
<p id="appendix-A.2.2-2">Type name: : <code>application</code><a href="#appendix-A.2.2-2" class="pilcrow">¶</a></p>
<p id="appendix-A.2.2-3">Subtype name: : <code>vp+sd-jwt</code><a href="#appendix-A.2.2-3" class="pilcrow">¶</a></p>
<p id="appendix-A.2.2-4">Required parameters: : n/a<a href="#appendix-A.2.2-4" class="pilcrow">¶</a></p>
<p id="appendix-A.2.2-5">Optional parameters: : n/a<a href="#appendix-A.2.2-5" class="pilcrow">¶</a></p>
<p id="appendix-A.2.2-6">Encoding considerations: : 8-bit code points; VP-SD-JWT values are encoded as a
series of base64url-encoded values (some of which may be the empty string)
separated by period ('.') and tilde ('~') characters.<a href="#appendix-A.2.2-6" class="pilcrow">¶</a></p>
<p id="appendix-A.2.2-7">Security considerations: : See Security Considerations in Section TODO.<a href="#appendix-A.2.2-7" class="pilcrow">¶</a></p>
<p id="appendix-A.2.2-8">Interoperability considerations: : n/a<a href="#appendix-A.2.2-8" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="appendix-A.2.2-9.1">Published specification: : RFC TODO<a href="#appendix-A.2.2-9.1" class="pilcrow">¶</a>
</li>
            <li class="normal" id="appendix-A.2.2-9.2">Applications that use this media type: : Applications that issue, present,
verify verifiable credentials and presentations.<a href="#appendix-A.2.2-9.2" class="pilcrow">¶</a>
</li>
            <li class="normal" id="appendix-A.2.2-9.3">
              <p id="appendix-A.2.2-9.3.1">Additional information:<a href="#appendix-A.2.2-9.3.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="appendix-A.2.2-9.3.2.1">Magic number(s): n/a<a href="#appendix-A.2.2-9.3.2.1" class="pilcrow">¶</a>
</li>
                <li class="normal" id="appendix-A.2.2-9.3.2.2">File extension(s): n/a<a href="#appendix-A.2.2-9.3.2.2" class="pilcrow">¶</a>
</li>
                <li class="normal" id="appendix-A.2.2-9.3.2.3">Macintosh file type code(s): n/a<a href="#appendix-A.2.2-9.3.2.3" class="pilcrow">¶</a>
</li>
                <li class="normal" id="appendix-A.2.2-9.3.2.4">Person &amp; email address to contact for further information: TBD<a href="#appendix-A.2.2-9.3.2.4" class="pilcrow">¶</a>
</li>
                <li class="normal" id="appendix-A.2.2-9.3.2.5">Intended usage: COMMON<a href="#appendix-A.2.2-9.3.2.5" class="pilcrow">¶</a>
</li>
                <li class="normal" id="appendix-A.2.2-9.3.2.6">Restrictions on usage: none<a href="#appendix-A.2.2-9.3.2.6" class="pilcrow">¶</a>
</li>
                <li class="normal" id="appendix-A.2.2-9.3.2.7">Author: Oliver Terbu <a href="mailto:TODO@email.com">TODO@email.com</a><a href="#appendix-A.2.2-9.3.2.7" class="pilcrow">¶</a>
</li>
                <li class="normal" id="appendix-A.2.2-9.3.2.8">Change controller: IETF<a href="#appendix-A.2.2-9.3.2.8" class="pilcrow">¶</a>
</li>
              </ul>
</li>
          </ul>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="Acknowledgements">
<section id="appendix-B">
      <h2 id="name-acknowledgements">
<a href="#appendix-B" class="section-number selfRef">Appendix B. </a><a href="#name-acknowledgements" class="section-name selfRef">Acknowledgements</a>
      </h2>
<p id="appendix-B-1">We would like to thank Alen Horvat, Christian Bormann, Giuseppe De Marco,
Torsten Lodderstedt and Kristina Yasuda for their contributions (some of
which substantial) to this draft and to the initial set of implementations.<a href="#appendix-B-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="document-history">
<section id="appendix-C">
      <h2 id="name-document-history">
<a href="#appendix-C" class="section-number selfRef">Appendix C. </a><a href="#name-document-history" class="section-name selfRef">Document History</a>
      </h2>
<p id="appendix-C-1">-00<a href="#appendix-C-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="appendix-C-2.1">Initial Version<a href="#appendix-C-2.1" class="pilcrow">¶</a>
</li>
      </ul>
</section>
</div>
<div id="authors-addresses">
<section id="appendix-D">
      <h2 id="name-authors-addresses">
<a href="#name-authors-addresses" class="section-name selfRef">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Oliver Terbu</span></div>
<div dir="auto" class="left"><span class="org">Spruce Systems, Inc.</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:oliver.terbu@spruceid.com" class="email">oliver.terbu@spruceid.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Daniel Fett</span></div>
<div dir="auto" class="left"><span class="org">Authlete Inc.</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:mail@danielfett.de" class="email">mail@danielfett.de</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>
</body>
</html>
